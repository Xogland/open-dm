import { z } from "zod";

const envSchema = z.object({
    CONVEX_DEPLOYMENT: z.string(),
    NEXT_PUBLIC_CONVEX_URL: z.string().url(),
    NEXT_PUBLIC_RECAPTCHA_SITE_KEY: z.string(),
    CAPTCHA_SECRET_KEY: z.string(),
    SEND_GRID_KEY: z.string().optional(),
    LEMON_SQUEEZY_ENVIRONMENT: z.enum(["sandbox", "production"]),
    LEMON_SQUEEZY_API_KEY: z.string(),
    LEMON_SQUEEZY_STORE_ID: z.string(),
    LEMON_SQUEEZY_WEBHOOK_SECRET: z.string(),
    LEMON_SQUEEZY_BEGINNER_MONTHLY_VARIANT_ID: z.string(),
    LEMON_SQUEEZY_BEGINNER_ANNUAL_VARIANT_ID: z.string(),
    LEMON_SQUEEZY_PRO_MONTHLY_VARIANT_ID: z.string(),
    LEMON_SQUEEZY_PRO_ANNUAL_VARIANT_ID: z.string(),
    LEMON_SQUEEZY_MAX_MONTHLY_VARIANT_ID: z.string(),
    LEMON_SQUEEZY_MAX_ANNUAL_VARIANT_ID: z.string(),
    LEMON_SQUEEZY_PREREGISTERED_DISCOUNT_CODE: z.string().optional(),
    // AWS SES Configuration (optional - validates only if present)
    AWS_SES_REGION: z.string().optional(),
    AWS_REGION: z.string().optional(),
    AWS_ACCESS_KEY_ID: z.string().optional(),
    AWS_SECRET_ACCESS_KEY: z.string().optional(),
    AWS_SES_FROM_EMAIL: z.string().email().optional(),
    AWS_SES_FROM_NAME: z.string().optional(),
    AWS_SES_ENDPOINT: z.string().url().optional(), // For LocalStack testing
});

export const env = envSchema.parse({
    CONVEX_DEPLOYMENT: process.env.CONVEX_DEPLOYMENT,
    NEXT_PUBLIC_CONVEX_URL: process.env.NEXT_PUBLIC_CONVEX_URL,
    NEXT_PUBLIC_RECAPTCHA_SITE_KEY: process.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY,
    CAPTCHA_SECRET_KEY: process.env.CAPTCHA_SECRET_KEY,
    SEND_GRID_KEY: process.env.SEND_GRID_KEY,
    LEMON_SQUEEZY_ENVIRONMENT: process.env.LEMON_SQUEEZY_ENVIRONMENT,
    LEMON_SQUEEZY_API_KEY: process.env.LEMON_SQUEEZY_API_KEY,
    LEMON_SQUEEZY_STORE_ID: process.env.LEMON_SQUEEZY_STORE_ID,
    LEMON_SQUEEZY_WEBHOOK_SECRET: process.env.LEMON_SQUEEZY_WEBHOOK_SECRET,
    LEMON_SQUEEZY_BEGINNER_MONTHLY_VARIANT_ID: process.env.LEMON_SQUEEZY_BEGINNER_MONTHLY_VARIANT_ID,
    LEMON_SQUEEZY_BEGINNER_ANNUAL_VARIANT_ID: process.env.LEMON_SQUEEZY_BEGINNER_ANNUAL_VARIANT_ID,
    LEMON_SQUEEZY_PRO_MONTHLY_VARIANT_ID: process.env.LEMON_SQUEEZY_PRO_MONTHLY_VARIANT_ID,
    LEMON_SQUEEZY_PRO_ANNUAL_VARIANT_ID: process.env.LEMON_SQUEEZY_PRO_ANNUAL_VARIANT_ID,
    LEMON_SQUEEZY_MAX_MONTHLY_VARIANT_ID: process.env.LEMON_SQUEEZY_MAX_MONTHLY_VARIANT_ID,
    LEMON_SQUEEZY_MAX_ANNUAL_VARIANT_ID: process.env.LEMON_SQUEEZY_MAX_ANNUAL_VARIANT_ID,
    LEMON_SQUEEZY_PREREGISTERED_DISCOUNT_CODE: process.env.LEMON_SQUEEZY_PREREGISTERED_DISCOUNT_CODE,
    // AWS SES Configuration
    AWS_SES_REGION: process.env.AWS_SES_REGION,
    AWS_REGION: process.env.AWS_REGION,
    AWS_ACCESS_KEY_ID: process.env.AWS_ACCESS_KEY_ID,
    AWS_SECRET_ACCESS_KEY: process.env.AWS_SECRET_ACCESS_KEY,
    AWS_SES_FROM_EMAIL: process.env.AWS_SES_FROM_EMAIL,
    AWS_SES_FROM_NAME: process.env.AWS_SES_FROM_NAME,
    AWS_SES_ENDPOINT: process.env.AWS_SES_ENDPOINT,
});
